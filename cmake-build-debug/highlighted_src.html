<pre>
<span style="color:#C19600;">#include </span><span style="color:#339900;">&ltiostream&gt</span>
<span style="color:#C19600;">#include </span><span style="color:#339900;">&ltmemory&gt</span>
<span style="color:#C19600;">#include </span><span style="color:#339900;">&ltregex&gt</span>
<span style="color:#C19600;">#include </span><span style="color:#339900;">&ltstring&gt</span>
<span style="color:#C19600;">#include </span><span style="color:#339900;">&ltstring_view&gt</span>
<span style="color:#C19600;">#include </span><span style="color:#339900;">&ltvector&gt</span>

<span style="color:#C19600;">#include </span><span style="color:#339900;">"SrcHighlighter.h"</span>
<span style="color:#C19600;">#include </span><span style="color:#339900;">"CSrcHighlighter.h"</span>
<span style="color:#C19600;">#include </span><span style="color:#339900;">"CppSrcHighlighter.h"</span>

<span style="color:#C19600;">#define </span><span style="color:#339900;">TEST_OUTPUT </span>&ltspan style="color:#339900;"&gt"highlighted_src.html"&lt/span&gt

<span style="color:#666666;">/*
 * Gyengeségek:
 *
 * A     katakterek sehol nem fordulhatnak elő a forráskódban
 * A string literálokban és kommentekben nem fordulhatnak elő html tagszerű elemek (<...>), include-ok kivételt képeznek.
 * String literálok utáni számkonstansok már nem lesznek kikékítve.
 *
 */</span>


<span style="color:#0000ff;">int</span> main()
{
    std::cout << <span style="color:#339900;">"Full path of C/C++ source code file: "</span> << std::endl;
    std::string path;
    std::getline(std::cin, path);       <span style="color:#666666;">// szóközös mappákra</span>

    std::vector<std::string> file;
    std::string line;
    std::ifstream is(std::cref(path));

    <span style="color:#0000ff;">while</span> (std::getline(is, line))
    {
        file.push_back(std::move(line));
    }
    is.close();

    <span style="color:#0000ff;">const</span> std::unique_ptr<SrcHighlighter> highlighter = std::move (
            [&]() -> std::unique_ptr<SrcHighlighter>
            {
                std::regex cFileRegex(R<span style="color:#339900;">"(.*\.c)"</span>);
                std::regex cppFileRegex(R<span style="color:#339900;">"(.*\.((cc)|(cpp)|(cxx)))"</span>);


                <span style="color:#0000ff;">if</span> (std::regex_match(path, cFileRegex))
                {
                    <span style="color:#0000ff;">return</span> std::make_unique<CSrcHighlighter>(file);
                }
                <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span> (std::regex_match(path, cppFileRegex))
                {
                    <span style="color:#0000ff;">return</span> std::make_unique<CppSrcHighlighter>(file);
                }

                <span style="color:#0000ff;">throw</span> std::runtime_error(<span style="color:#339900;">"Unknown file format!"</span>);
            }()
    );

    highlighter->exportHighlightedSrcCode(TEST_OUTPUT);
}

<span style="color:#666666;">/* C:\Users\ScHoolBoy Q\CLionProjects\cpphf2\c_test.c */</span>
<span style="color:#666666;">/* C:\Users\ScHoolBoy Q\CLionProjects\cpphf2\hard_test_c.c*/</span>
<span style="color:#666666;">/* C:\Users\ScHoolBoy Q\CLionProjects\cpphf2\c_file_elodtol.c*/</span>
</pre>
